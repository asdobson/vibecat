<UserControl x:Class="VibeCat.Views.SettingsPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             Width="250">
    <Border Background="#EE1A1A1A">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="20">
                <TextBlock Text="Settings"
                         Foreground="White"
                         FontSize="18"
                         FontWeight="SemiBold"
                         Margin="0,0,0,20"/>

                <TextBlock Text="Window Opacity:"
                         Foreground="Gray"
                         Margin="0,0,0,5"/>

                <Slider x:Name="OpacitySlider"
                      Minimum="0" Maximum="100" Value="100"
                      ValueChanged="OpacitySlider_ValueChanged"
                      Margin="0,0,0,15"/>

                <Separator Background="#333333" Margin="0,5,0,15"/>

                <TextBlock Text="Edge Snapping"
                         Foreground="White"
                         FontSize="14"
                         FontWeight="SemiBold"
                         Margin="0,0,0,10"/>

                <CheckBox x:Name="SnappingEnabledCheckBox"
                        Content="Enable edge snapping"
                        Foreground="Gray"
                        IsChecked="True"
                        Checked="SnappingEnabledCheckBox_Changed"
                        Unchecked="SnappingEnabledCheckBox_Changed"
                        Margin="0,0,0,10"/>

                <TextBlock Text="Snap Distance:"
                         Foreground="Gray"
                         Margin="0,0,0,5"/>

                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Slider x:Name="SnapDistanceSlider"
                          Grid.Column="0"
                          Minimum="10" Maximum="50" Value="20"
                          ValueChanged="SnapDistanceSlider_ValueChanged"
                          IsEnabled="{Binding ElementName=SnappingEnabledCheckBox, Path=IsChecked}"/>
                    <TextBlock Grid.Column="1"
                             Text="{Binding ElementName=SnapDistanceSlider, Path=Value, StringFormat={}{0:0} px}"
                             Foreground="Gray"
                             Margin="10,0,0,0"
                             VerticalAlignment="Center"/>
                </Grid>

                <Separator Background="#333333" Margin="0,5,0,15"/>

                <TextBlock Text="Horizontal Flipping"
                         Foreground="White"
                         FontSize="14"
                         FontWeight="SemiBold"
                         Margin="0,0,0,10"/>

                <CheckBox x:Name="AutoFlipEnabledCheckBox"
                        Content="Auto-flip on edge snap"
                        Foreground="Gray"
                        IsChecked="True"
                        Checked="AutoFlipEnabledCheckBox_Changed"
                        Unchecked="AutoFlipEnabledCheckBox_Changed"
                        Margin="0,0,0,10"/>

                <Button x:Name="ManualFlipButton"
                      Content="Flip Horizontally"
                      IsEnabled="False"
                      Click="ManualFlipButton_Click"
                      Padding="10,5"
                      Margin="0,0,0,15"/>

                <Separator Background="#333333" Margin="0,5,0,15"/>

                <TextBlock Text="Spotify Integration"
                         Foreground="White"
                         FontSize="14"
                         FontWeight="SemiBold"
                         Margin="0,0,0,10"/>

                <Button x:Name="SpotifyConnectButton"
                      Content="Connect to Spotify"
                      Click="SpotifyConnectButton_Click"
                      Padding="10,5"
                      Margin="0,0,0,10"/>

                <TextBlock x:Name="SpotifyStatusText"
                         Text="Not connected"
                         Foreground="Gray"
                         FontSize="12"
                         Margin="0,0,0,10"
                         Visibility="Collapsed"/>

                <Border x:Name="SpotifyTrackInfo"
                       Background="#33000000"
                       CornerRadius="4"
                       Padding="10"
                       Margin="0,0,0,10"
                       Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock x:Name="SpotifyTrackName"
                                 Foreground="White"
                                 FontSize="12"
                                 FontWeight="SemiBold"
                                 TextTrimming="CharacterEllipsis"/>
                        <TextBlock x:Name="SpotifyArtistName"
                                 Foreground="Gray"
                                 FontSize="11"
                                 TextTrimming="CharacterEllipsis"/>
                        <TextBlock x:Name="SpotifyBPMText"
                                 Foreground="Gray"
                                 FontSize="11"
                                 Margin="0,5,0,0"/>
                    </StackPanel>
                </Border>

                <CheckBox x:Name="SpotifySyncEnabledCheckBox"
                        Content="Sync animation to Spotify BPM"
                        Foreground="Gray"
                        IsChecked="False"
                        IsEnabled="False"
                        Checked="SpotifySyncEnabledCheckBox_Changed"
                        Unchecked="SpotifySyncEnabledCheckBox_Changed"
                        Margin="0,0,0,15"/>

                <Separator Background="#333333" Margin="0,5,0,15"/>

                <StackPanel>
                    <StackPanel.Style>
                        <Style TargetType="StackPanel">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding ElementName=SpotifySyncEnabledCheckBox, Path=IsChecked}" Value="True">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </StackPanel.Style>

                    <TextBlock Text="Animation Speed"
                             Foreground="White"
                             FontSize="14"
                             FontWeight="SemiBold"
                             Margin="0,0,0,10"/>

                    <TextBlock Text="BPM (Beats Per Minute):"
                             Foreground="Gray"
                             Margin="0,0,0,5"/>

                    <Grid Margin="0,0,0,15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Slider x:Name="BPMSlider"
                              Grid.Column="0"
                              Minimum="60" Maximum="180" Value="120"
                              ValueChanged="BPMSlider_ValueChanged"/>
                        <TextBlock Grid.Column="1"
                                 Text="{Binding ElementName=BPMSlider, Path=Value, StringFormat={}{0:0} BPM}"
                                 Foreground="Gray"
                                 Margin="10,0,0,0"
                                 VerticalAlignment="Center"
                                 MinWidth="60"/>
                    </Grid>
                </StackPanel>

                <Separator Background="#333333" Margin="0,5,0,15"/>

                <TextBlock Text="Click-Through Mode"
                         Foreground="White"
                         FontSize="14"
                         FontWeight="SemiBold"
                         Margin="0,0,0,10"/>

                <CheckBox x:Name="ClickThroughCheckBox"
                        Content="Enable click-through mode"
                        Foreground="Gray"
                        IsChecked="False"
                        Checked="ClickThroughCheckBox_Changed"
                        Unchecked="ClickThroughCheckBox_Changed"
                        Margin="0,0,0,10"/>

                <TextBlock Text="Hotkey: Ctrl+Alt+T"
                         Foreground="Gray"
                         FontSize="12"
                         Margin="20,0,0,15"/>

                <TextBlock Text="More settings coming soon..."
                         Foreground="Gray"
                         FontStyle="Italic"/>
            </StackPanel>
        </ScrollViewer>
    </Border>
</UserControl>